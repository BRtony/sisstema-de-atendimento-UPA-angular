<form #formAtd="ngForm" [formGroup]="addressForm" novalidate (ngSubmit)="atualizar()">
    <mat-card class="customer-card">
      <mat-card-header>
        <mat-card-title>Editar cadastro de atendimento</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div class="row">
          <div class="col">
            <mat-form-field class="full-width">
              <mat-select 
              placeholder="Endereço da unidade" 
              name="enderecoUnidade" 
              formControlName="company" 
              [(ngModel)]="atendimento.enderecoUnidade" 
              >
                <mat-option 
                  *ngFor="let company of companies" [value]="company.abbreviation">
                  {{ company.name }}
                </mat-option>
              </mat-select>
              <mat-error *ngIf="addressForm.controls['company'].hasError('required')">
                Endereço é <strong>obrigatório</strong>
              </mat-error>
            </mat-form-field>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <mat-form-field class="full-width">
              <input 
              matInput 
              placeholder="Nome" 
              formControlName="firstName"
              name="nome" 
              [(ngModel)]="atendimento.nome"
              >
              <mat-error *ngIf="addressForm.controls['firstName'].hasError('required')">
                Nome é <strong>obrigatório</strong>
              </mat-error>
            </mat-form-field>
          </div>
          <div class="col">
            <mat-form-field class="full-width">
              <input 
              matInput 
              placeholder="Sobrenome" 
              formControlName="lastName"
              name="sobrenome" 
              [(ngModel)]="atendimento.sobrenome"
              >
              <mat-error *ngIf="addressForm.controls['lastName'].hasError('required')">
                Sobrenome é <strong>obrigatório</strong>
              </mat-error>
            </mat-form-field>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <mat-form-field class="full-width">
              <textarea 
              matInput 
              placeholder="Endereço do paciente" 
              formControlName="address"
              name="endereco" 
              [(ngModel)]="atendimento.endereco"
              ></textarea>
              <mat-error *ngIf="addressForm.controls['address'].hasError('required')">
                Endereço é <strong>obrigatório</strong>
              </mat-error>
            </mat-form-field>
          </div>
        </div>
        <div class="row" *ngIf="!hasUnitNumber">
          <div class="col">
            <button mat-button type="button" (click)="hasUnitNumber = !hasUnitNumber">
              + Adicionar complemento, ex: AP, BL, QU
            </button>
          </div>
        </div>
        <div class="row" *ngIf="hasUnitNumber">
          <div class="col">
            <mat-form-field class="full-width">
              <textarea 
              matInput 
              placeholder="Complemento" 
              formControlName="address2"
              name="complemento" 
              [(ngModel)]="atendimento.complemento"
              ></textarea>
            </mat-form-field>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <mat-form-field class="full-width">
              <input 
              matInput 
              placeholder="Cidade" 
              formControlName="city"
              name="cidade" 
              [(ngModel)]="atendimento.cidade"
              >
              <mat-error *ngIf="addressForm.controls['city'].hasError('required')">
                Cidade é <strong>obrigatório</strong>
              </mat-error>
            </mat-form-field>
          </div>
          <div class="col">
            <mat-form-field class="full-width">
              <mat-select 
              placeholder="Estado" 
              formControlName="state"
              name="estado" 
              [(ngModel)]="atendimento.estado"
              >
                <mat-option *ngFor="let state of states" [value]="state.abbreviation">
                  {{ state.name }}
                </mat-option>
              </mat-select>
              <mat-error *ngIf="addressForm.controls['state'].hasError('required')">
                Estado é <strong>obrigatório</strong>
              </mat-error>
            </mat-form-field>
          </div>
          <div class="col">
            <mat-form-field class="full-width">
              <input 
              matInput 
              #postalCode 
              maxlength="8" 
              placeholder="CEP" 
              type="number" 
              formControlName="postalCode"
              name="cep" 
              [(ngModel)]="atendimento.cep"
              >
              <mat-hint align="end">{{postalCode.value.length}} / 8</mat-hint>
            </mat-form-field>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <mat-form-field class="full-width">
              <textarea 
              matInput 
              placeholder="Sintomas" 
              formControlName="sintomas"
              name="sintomas" 
              [(ngModel)]="atendimento.sintomas"
              ></textarea>
            </mat-form-field>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <mat-form-field class="full-width">
              <textarea 
              matInput 
              placeholder="Observações" 
              formControlName="observacoes"
              name="observacoes" 
              [(ngModel)]="atendimento.observacoes"
              ></textarea>
            </mat-form-field>
          </div>
        </div>
  
        <div class="row">
          <div class="col">
            <mat-radio-group 
            formControlName="priority"
            name="priority" 
            [(ngModel)]="atendimento.priority"
            >
              <mat-radio-button value="normal">Normal</mat-radio-button>
              <mat-radio-button value="alerta">Alerta</mat-radio-button>
              <mat-radio-button value="alta">Alta</mat-radio-button>
            </mat-radio-group>
          </div>
        </div>
      </mat-card-content>
      <mat-card-actions>
        <button mat-raised-button color="primary" type="submit" [disabled]="!formAtd.form.valid">Enviar</button>
        <a [routerLink]="['/atendimento']" mat-raised-button color="primary">Voltar</a>
      </mat-card-actions>
    </mat-card>
  </form>